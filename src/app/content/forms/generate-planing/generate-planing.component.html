<div class="overlay" *ngIf="loading">

    <div class="spinner ">
        <div class="spinner-grow text-primary" role="status">
            <span class="sr-only">Loading...</span>


        </div>
    </div>
</div>
<gx-card card-title="Nueva Planificación">
    <div class="btn-group mr-2 mb-2" ngbDropdown>
        <input class="form-control  border-1 shadow-none bg-focus" #id maxlength="1000" placeholder="id"
            style="text-transform: uppercase;" (keyup.enter)="searchById(id.value)">
        <button type="button" class="btn btn-outline-primary" (click)="searchById(id.value)">
            OK
        </button>

    </div>
    <div class="row">
        <div class="col-xl-12 col-md-6 col-12 order-xl-1" *ngIf="dataPerson.nombre">
            <!-- Card -->
            <gx-card [fullHeight]="true" card-title="Información general" header-class="pt-6">

                <label for="">Nombre: </label>
                <p class="h5 mb-0" text>{{dataPerson.nombre}} {{dataPerson.apellido}}</p>

            </gx-card>
            <!-- /card -->
        </div>



    </div>
    
    <div class="form-row" *ngIf="dataPerson.nombre">
        <button class="btn btn-primary" type="submit"  (click)="generatePlan()">Generar Planificación </button>

    </div>
    <div class="table-responsive">
        <p-table #dt1 [value]="listPlan" [lazy]="true" (onLazyLoad)="loadPlan($event)" 
      [paginator]="true" [rows]="10" [totalRecords]="totalRecords" [loading]="loading"
      [globalFilterFields]="['id']" dataKey="id">
      <ng-template pTemplate="caption">
        <div class="p-d-flex">
          <span class="p-input-icon-left p-ml-auto">
                    <i class="pi pi-search"></i>
                    <input pInputText type="text" (input)="dt1.filterGlobal($event.target.value, 'contains')" placeholder="Search keyword" />
                </span>
        </div>
      </ng-template>
      <ng-template pTemplate="header">
          <tr>
            <th pSortableColumn="name">Identificación <p-sortIcon field="id"></p-sortIcon></th>           
             <th>Nombre</th>
     
              <th>Nro. Cuenta</th>
              <th>Calificación</th>
             
              <th>Saldo</th>
             
              <th>Seleccionar</th>
          </tr>
      </ng-template>
      <ng-template pTemplate="body" let-item>
          <tr>
              <td>{{item.identificacion}}</td>
              <td>{{item.nombres}}</td>
            
              <td>{{item.nro_credito}}</td>
              <td>{{item.id_calificacion}}</td>
            
              <td>{{item.saldo_total}}</td>
            
  
            <td>
                <input type="checkbox" aria-label="Checkbox for following text input" (click)="selectCuenta($event,item)" checked>
          </td>
             
          </tr>
      </ng-template>
  </p-table>
      </div>

      <form [formGroup]="planForm" class="needs-validation" novalidate>
          <div *ngIf="mostrarsave">
        <div class="col-sm-4 mb-3">
            <label for="validationDefault02">Fecha de Planificación</label>

            <input type='date' #myDate class="form-control" formControlName="fecha" required /><br>


        </div>
        <div class="form-row">
            <button class="btn btn-primary" type="submit"  (click)="savePlan()" [disabled]="disableSave">Guardar Planificación </button>
    
        </div>
    </div>
    </form>

</gx-card>