<!-- Page Header -->
<div class="dt-page__header">
  <h1 class="dt-page__title">Lista de Cuentas</h1>
</div>
<!-- /page header -->

<!-- Grid -->
<div class="row">

  <!-- Grid Item -->
  <div class="col-12">

    <!-- Card -->
    

      <!-- Dropzone -->
      <div class="box-container" fxLayout="column">

      <!--   <div class="info-container">
          <p>En esta seccion podrás consultar las cuentas por cada empresa que administras</p>
        </div> -->

<!--         <div class="horizontal-container row">
          <div class="vertical-container col-12 col-md-4">
            <h4 class="text-muted">Selecciona una empresa</h4>

            <div class="action-container mr-5">
              <div class="btn-group mr-2 mb-2" ngbDropdown>
                <button type="button" class="btn btn-outline-primary" ngbDropdownToggle>
                  {{selectedBussines}}
                </button>
                <div ngbDropdownMenu>
                  <div *ngFor="let item of listEmpresas">
                    <a class="dropdown-item" (click)="evento(item)">{{item.nombre_comercial}}</a>
                  </div>
                  <div class="dropdown-divider"></div>
                </div>
              </div>
            </div>
            <br>
            <br>
            <br>
            <br>

          </div>

          
        </div> -->
      </div>
      <!-- /dropzone -->

  
    <!-- /card -->

  </div>
  <!-- /grid item -->

</div>

<div class="row">
  <bs-card class="overflow-hidden" body-class="pt-0">
    <!-- Card Header -->
    <bs-card-header class="bg-transparent">
      <h3 class="card-title">Listado de Cuentas</h3>
      <h5 class="card-subtitle mb-0">Total: {{collectionSize}}</h5>

    </bs-card-header>
    <!-- /card header -->

    <!-- Tables -->
     <!-- <div class="table-responsive" style="overflow-x: scroll;">
      <p-table #dt1 [value]="customers" [lazy]="true" (onLazyLoad)="loadCustomers($event)" [paginator]="true"
        [rows]="10" [totalRecords]="totalRecords" [loading]="loading" [globalFilterFields]="['id','apellido']"
        dataKey="id" >
        <ng-template pTemplate="caption">
          <div class="p-d-flex">
            <span class="p-input-icon-left p-ml-auto">
              <i class="pi pi-search"></i>
              <input pInputText type="text" (input)="dt1.filterGlobal($event.target.value.toUpperCase(), 'contains')"
                placeholder="Buscar por Id, nombres" />
            </span>
          </div>
        </ng-template>
        <ng-template pTemplate="header">
          <tr>
            <th pSortableColumn="identificacion">Identificación <p-sortIcon field="id"></p-sortIcon>
            </th>
            <th>Nombre</th>
            <th>Fecha Cuenta</th>
            <th>Nro. Cuenta</th>
            <th>Producto</th>
            <th>Periodicidad</th>
            <th>Plazo</th>
            <th>Tasa</th>
            <th>Saldo</th>
            <th>Estado</th>
            <th>Detalle</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-customer>
          <tr>
            <td>{{customer.identificacion}}</td>
            <td>{{customer.apellido}} {{customer.nombre}}</td>
            <td>{{customer.fecha_concesion}}</td>
            <td>{{customer.nro_credito}}</td>
            <td>{{customer.nombre_producto}}</td>
            <td>{{customer.periocidad}}</td>
            <td>{{customer.plazo}}</td>
            <td>{{customer.tasa}}</td>
            <td>{{customer.saldo_total}}</td>
            <td>{{customer.estado}}</td>

            <td>
              <button pButton pRipple icon="pi pi-eye" class="p-button-rounded p-button-success p-mr-2"
                (click)="goDetail(customer)"></button>
            </td>

          </tr>
        </ng-template>
      </p-table>
    </div>  -->
    <form>
      <div class="form-group form-inline">
        Busqueda: <input class="form-control ml-2" #search type="text" [formControl]="filter"(keyup.enter)=loadsearch(search.value) />
      </div>
    </form>
    <div class="table-responsive">

    <table class="table table-striped table-bordered table-hover">
      <thead>
      <tr>
        <th scope="col">Identificación</th>
        <th scope="col">Nombre</th>
        <th scope="col">Fecha Cuenta</th>
        <th scope="col">Nro. Cuenta</th>
        <th scope="col">Producto</th>
        <th scope="col">Periodicidad</th>
        <th scope="col">Plazo</th>
        <th scope="col">Tasa</th>
        <th scope="col">Monto Crédito</th>
        <th scope="col">Saldo</th>
        <th scope="col">Días Atraso</th>
        <th scope="col">Estado</th>
        <th scope="col">Detalle</th>
       
      </tr>
      </thead>
      <tbody>
        
      <tr *ngFor="let customer of customers index as i">
        <th scope="row"> <ngb-highlight [result]="customer.identificacion" [term]="filter.value"></ngb-highlight></th>
        
        <td>{{customer.apellido}} {{customer.nombre}}</td>
        <td>{{customer.fecha_concesion}}</td>
        <td>{{customer.nro_credito}}</td>
        <td>{{customer.nombre_producto}}</td>
        <td>{{customer.periocidad}}</td>
        <td>{{customer.plazo}}</td>
        <td>{{customer.tasa}}</td>
        <td>{{customer.monto_total}}</td>
         <td><span  [ngStyle]="{'color': customer.color_monto} " > <strong> {{customer.saldo_total}} </strong></span></td>
        <td > <span [ngStyle]="{'color': customer.color_dias} "> <strong> {{customer.dias_atraso}} </strong></span></td>
        <!-- <td [ngStyle]="{'background-color': '#F57C00' } ">100</td>
        <td [ngStyle]="{'background-color': '#F57C00' } ">200</td> -->
        <td>{{customer.estado}}</td>

        <td>
          <button pButton pRipple icon="pi pi-eye" class="p-button-rounded p-button-success p-mr-2"
            (click)="goDetail(customer)"></button>
        </td>
      </tr>
      </tbody>
    </table>
    <div class="d-flex justify-content-between p-2">
      <ngb-pagination [collectionSize]="collectionSize" [(page)]="page" [pageSize]="pageSize" (pageChange)="paginator($event)">
      </ngb-pagination>
    
      <select class="custom-select" style="width: auto" [(ngModel)]="pageSize" (change)="loadTable2(pageSize)" >
        <option [ngValue]="5">5 registros</option>
        <option [ngValue]="10">10 registros</option>
        <option [ngValue]="20">20 registros</option>
      </select>
    </div>
    </div> 
    <!-- /tables -->

  </bs-card>
</div>
<!-- /grid -->